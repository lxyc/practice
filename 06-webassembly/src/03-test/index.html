<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // fetch("./main.wasm")
      //   .then((response) => response.arrayBuffer())
      //   .then((bytes) => WebAssembly.compile(bytes))
      //   .then((module) => WebAssembly.instantiate(module))
      //   .then((instance) => {
      //     console.log(instance.exports);
      //     console.log(instance.exports.add(21, 21));
      //     console.log(instance.exports.inc(12));
      //   });
      fetchAndInstantiate("./main.wasm").then((instance) => {
        console.log(instance.exports);
        console.log(instance.exports.add(21, 21));
        console.log(instance.exports.inc(12));
      });

      function fetchAndInstantiate(url, importObject) {
        return fetch(url)
          .then((response) => response.arrayBuffer())
          .then((bytes) => WebAssembly.instantiate(bytes, importObject))
          .then((module) => module.instance);
      }
    </script>
  </body>
</html>
